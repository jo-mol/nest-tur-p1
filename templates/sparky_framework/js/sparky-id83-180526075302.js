/* SPARKY DYNAMICALLY GENERATED JAVASCRIPT - DO NOT EDIT THIS FILE!
YOUR CHANGES WILL BE OVERWRITTEN AFTER NEXT SAVE OF TEMPLATE PARAMETERS!
You can add your custom JavaScript code in template options, under Custom tab or
you can edit file custom.js to add your JavaScript code. */

// Drop-down menu

function isAppleDevice(){
    return (
        (navigator.userAgent.toLowerCase().indexOf("ipad") > -1) ||
        (navigator.userAgent.toLowerCase().indexOf("iphone") > -1) ||
        (navigator.userAgent.toLowerCase().indexOf("ipod") > -1)
    );
}

(function(jQuery){  
    jQuery.fn.dropDownMenu_topmenu = function(options) {  
  
        var defaults = {  
            speed: 300,  
            effect: "fadeToggle"
        };  
        var options = jQuery.extend(defaults, options);  
      
        return this.each(function() {

            var screenWidth = jQuery("body").width();

            jQuery(".mnu_topmenu ul").hide();
            jQuery(".mnu_topmenu li ul li").filter(":last-child").css("border-bottom", "none");

            if(screenWidth > 993) {

                jQuery(".mnu_topmenu li").hover(function(){
                    jQuery(this).children("ul").stop()[options.effect](options.speed);
                },function(){
                    jQuery(this).css("position","relative").children("ul").stop()[options.effect](options.speed);
                });

            } else {

                jQuery(".mnu_topmenu li a[href='#']").toggle(function(){
                    jQuery(this).parent().find("ul:first:not(:visible)").stop(true,true)[options.effect](options.speed);
                },function(){
                    jQuery(this).parent().css("position", "relative").find("ul:first:visible").stop(true,true)[options.effect](options.speed);
                });
                                        
                jQuery("nav ul.navv").find("li > ul").prev().addClass("firstClick");        

            }
            jQuery(document).on("click",".mnu_topmenu a", function(){
                if(!jQuery(this).hasClass("firstClick"))
                    jQuery(this).addClass("firstClick");
                
                return true;
            });
            
            
            jQuery(document).on("click",".mnu_topmenu .firstClick",function(e){    
                if((jQuery("html.no-touchevents").length == 1 && screenWidth > 993) || (isAppleDevice() && screenWidth > 993)){
                    return true;
                }
                e.preventDefault(); 

                var href = jQuery(this).attr("href");
                var target = jQuery(this).attr("target");
                var link = jQuery(this);
                jQuery(this).attr("href","#");
                jQuery(this).attr("target","");
                
                jQuery(this).removeClass("firstClick");
                
                setTimeout(function(){
                    link.attr("href",href);
                    link.attr("target",target);
                },200);
                if(screenWidth > 993){
                    jQuery(this).children("ul").stop()[options.effect](options.speed);
                }           
                else
                    jQuery(this).parent().find("ul:first:not(:visible)").stop(true,true)[options.effect](options.speed);
            });
            
            jQuery(window).resize(function(){
                var screenWidth = jQuery("body").width();
                if(screenWidth > 993)
                    jQuery("nav ul.navv").find("li > ul").prev().removeClass("firstClick");
                else
                    jQuery("nav ul.navv").find("li > ul").prev().addClass("firstClick");
            });
            
        });  
    };  
})(jQuery);

jQuery(document).ready(function(){
    jQuery(".mnu_topmenu").dropDownMenu_topmenu({
        speed: 300,
        effect: "fadeToggle"
    });
    
    //hover menu fix    
    setTimeout(function(){
        jQuery("#blocker").remove();
        jQuery("nav ul.navv").find("li > ul").prev().addClass("firstClick");
    }, 1000)
    
});

/*! modernizr 3.3.1 (Custom Build) | MIT *
 * http://modernizr.com/download/?-touchevents-setclasses !*/
!function(e,n,t){function o(e,n){return typeof e===n}function s(){var e,n,t,s,a,i,r;for(var l in c)if(c.hasOwnProperty(l)){if(e=[],n=c[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(s=o(n.fn,"function")?n.fn():n.fn,a=0;a<e.length;a++)i=e[a],r=i.split("."),1===r.length?Modernizr[r[0]]=s:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=s),f.push((s?"":"no-")+r.join("-"))}}function a(e){var n=u.className,t=Modernizr._config.classPrefix||"";if(p&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\s)"+t+"no-js(\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),p?u.className.baseVal=n:u.className=n)}function i(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):p?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(){var e=n.body;return e||(e=i(p?"svg":"body"),e.fake=!0),e}function l(e,t,o,s){var a,l,f,c,d="modernizr",p=i("div"),h=r();if(parseInt(o,10))for(;o--;)f=i("div"),f.id=s?s[o]:d+(o+1),p.appendChild(f);return a=i("style"),a.type="text/css",a.id="s"+d,(h.fake?h:p).appendChild(a),h.appendChild(p),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(n.createTextNode(e)),p.id=d,h.fake&&(h.style.background="",h.style.overflow="hidden",c=u.style.overflow,u.style.overflow="hidden",u.appendChild(h)),l=t(p,e),h.fake?(h.parentNode.removeChild(h),u.style.overflow=c,u.offsetHeight):p.parentNode.removeChild(p),!!l}var f=[],c=[],d={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){c.push({name:e,fn:n,options:t})},addAsyncTest:function(e){c.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr;var u=n.documentElement,p="svg"===u.nodeName.toLowerCase(),h=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];d._prefixes=h;var m=d.testStyles=l;Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",h.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");m(o,function(e){t=9===e.offsetTop})}return t}),s(),a(f),delete d.addTest,delete d.addAsyncTest;for(var v=0;v<Modernizr._q.length;v++)Modernizr._q[v]();e.Modernizr=Modernizr}(window,document);
